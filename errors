// src/components/SummaryChart.js
import React from 'react';
import {
  BarChart,
  Bar,
  XAxis,
  YAxis,
  Tooltip,
  CartesianGrid,
  ResponsiveContainer
} from 'recharts';

const SummaryChart = ({ summary }) => {
  console.log("Summary Chart Data:", summary); // ✅ Logging inside component scope

  return (
    <div className="mb-5">
      <h4>Zone-wise Occupancy</h4>
      <ResponsiveContainer width="100%" height={300}>
        <BarChart data={summary}>
          <CartesianGrid strokeDasharray="3 3" />
          <XAxis dataKey="zone" />
          <YAxis allowDecimals={false} />
          <Tooltip />
          <Bar dataKey="count" fill="#007bff" />
        </BarChart>
      </ResponsiveContainer>
    </div>
  );
};

export default SummaryChart;





// src/components/ZoneDetailsTable.js
import React from 'react';

function ZoneDetailsTable({ data = {} }) {
  const entries = Object.entries(data || {});
  console.log("Zone Details:", data); // ✅ Correctly scoped log

  if (entries.length === 0) {
    return <p>No zone detail data available.</p>;
  }

  return (
    <div className="zone-details-table">
      {entries.map(([zone, employees]) => (
        <section key={zone}>
          <h3>{zone}</h3>
          <table>
            <thead>
              <tr>
                <th>EmployeeID</th>
                <th>Name</th>
                <th>Swipe Time</th>
              </tr>
            </thead>
            <tbody>
              {employees.map(emp => (
                <tr key={emp.EmployeeID + emp.Swipe_Time}>
                  <td>{emp.EmployeeID}</td>
                  <td>{emp.ObjectName1}</td>
                  <td>{emp.Swipe_Time}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </section>
      ))}
    </div>
  );
}

export default ZoneDetailsTable;






useEffect(() => {
  getLiveOccupancy()
    .then(res => {
      const data = res.data;
      console.log("API Response:", data); // <--- Add this line to confirm
      setSummaryData(data.summary || []);
      setDetailsData(data.details || {});
    })
    .catch(err => console.error('Occupancy fetch error:', err));
}, []);








// src/App.js

import React, { useEffect, useState } from 'react';
import { getLiveOccupancy } from './api'; // ✅ Correct relative import
import SummaryChart from './components/SummaryChart';
import ZoneDetailsTable from './components/ZoneDetailsTable';
import './App.css';

function App() {
  const [summaryData, setSummaryData] = useState([]);
  const [detailsData, setDetailsData] = useState({});

  useEffect(() => {
    getLiveOccupancy()
      .then(res => {
        const data = res.data;
        setSummaryData(data.summary || []);
        setDetailsData(data.details || {});
      })
      .catch(err => console.error('Occupancy fetch error:', err));
  }, []);

  return (
    <div className="App">
      <header className="App-header">
        <h1>Live Occupancy Dashboard</h1>
      </header>
      <main>
        <section>
          <h2>Occupancy Summary</h2>
          <SummaryChart summary={summaryData} />
        </section>
        <section>
          <h2>Zone Details</h2>
          <ZoneDetailsTable data={detailsData} />
        </section>
      </main>
    </div>
  );
}

export default App;











import axios from 'axios';

export function getLiveOccupancy() {
  return axios.get('http://localhost:5000/api/live-occupancy');
}





// src/App.js

import React, { useEffect, useState } from 'react';
import { getLiveOccupancy } from './api'; // make sure this path is correct
import SummaryChart from './components/SummaryChart';
import ZoneDetailsTable from './components/ZoneDetailsTable';
import './App.css';

function App() {
  const [summaryData, setSummaryData] = useState([]);
  const [detailsData, setDetailsData] = useState({});

  useEffect(() => {
    getLiveOccupancy()
      .then(res => {
        const data = res.data;
        setSummaryData(data.summary || []);
        setDetailsData(data.details || {});
      })
      .catch(err => console.error('Occupancy fetch error:', err));
  }, []);

  return (
    <div className="App">
      <header className="App-header">
        <h1>Live Occupancy Dashboard</h1>
      </header>
      <main>
        <section>
          <h2>Occupancy Summary</h2>
          <SummaryChart summary={summaryData} />
        </section>
        <section>
          <h2>Zone Details</h2>
          <ZoneDetailsTable data={detailsData} />
        </section>
      </main>
    </div>
  );
}

export default App;








import React, { useEffect, useState } from 'react';
import { getLiveOccupancy } from './api'; // Correct path
import SummaryChart from './components/SummaryChart';
import ZoneDetailsTable from './components/ZoneDetailsTable';
import './App.css';

function App() {
  const [summaryData, setSummaryData] = useState([]);
  const [detailsData, setDetailsData] = useState({});

  useEffect(() => {
    getLiveOccupancy()
      .then(res => {
        const data = res.data;
        setSummaryData(data.summary || []);
        setDetailsData(data.details || {});
      })
      .catch(err => console.error('Occupancy fetch error:', err));
  }, []);

  return (
    <div className="App">
      <header className="App-header">
        <h1>Live Occupancy Dashboard</h1>
      </header>
      <main>
        <section>
          <h2>Occupancy Summary</h2>
          <SummaryChart summary={summaryData} />
        </section>
        <section>
          <h2>Zone Details</h2>
          <ZoneDetailsTable data={detailsData} />
        </section>
      </main>
    </div>
  );
}

export default App;













import React, { useEffect, useState } from 'react';
import { getLiveOccupancy } from './api'; // adjust path if needed
import SummaryChart from './components/SummaryChart';
import ZoneDetailsTable from './components/ZoneDetailsTable';
import './App.css';

function App() {
  const [summaryData, setSummaryData] = useState([]);
  const [detailsData, setDetailsData] = useState({});

  useEffect(() => {
    getLiveOccupancy()
      .then(res => {
        const data = res.data;
        setSummaryData(data.summary || []);
        setDetailsData(data.details || {});
      })
      .catch(err => console.error('Occupancy fetch error:', err));
  }, []);

  return (
    <div className="App">
      <header className="App-header">
        <h1>Live Occupancy Dashboard</h1>
      </header>
      <main>
        <section>
          <h2>Occupancy Summary</h2>
          <SummaryChart summary={summaryData} />
        </section>
        <section>
          <h2>Zone Details</h2>
          <ZoneDetailsTable data={detailsData} />
        </section>
      </main>
    </div>
  );
}

export default App;








i have upadte api.js file as above once check App.js file carefully and if nedded give me updated js file carefully.

import React, { useEffect, useState } from 'react';
import SummaryChart from './components/SummaryChart';
import ZoneDetailsTable from './components/ZoneDetailsTable';
import './App.css';

function App() {
  const [summaryData, setSummaryData] = useState([]);
  const [detailsData, setDetailsData] = useState({});

  useEffect(() => {
    fetch('http://localhost:5000/api/live-occupancy')
      .then(res => res.json())
      .then(payload => {
        setSummaryData(payload.summary || []);
        setDetailsData(payload.details || {});
      })
      .catch(err => console.error('Occupancy fetch error:', err));
  }, []);

  return (
    <div className="App">
      <header className="App-header">
        <h1>Live Occupancy Dashboard</h1>
      </header>
      <main>
        <section>
          <h2>Occupancy Summary</h2>
          <SummaryChart summary={summaryData} /> {/* FIXED PROP */}
        </section>
        <section>
          <h2>Zone Details</h2>
          <ZoneDetailsTable data={detailsData} />
        </section>
      </main>
    </div>
  );
}

export default App;
